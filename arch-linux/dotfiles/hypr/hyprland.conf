plugin = /usr/local/lib/libhycov.so

################
### MONITORS ###
################

monitor=,preferred,auto,auto
monitor=eDP-1,1920x1080@60,0x0,1

###################
### MY PROGRAMS ###
###################

$terminal = kitty
$fileManager = dolphin
$menu = wofi --show drun
$THEME = catppuccin-mocha

#################
### AUTOSTART ###
#################

# Démarrage services & UI
exec-once = hypr-dock
exec-once = ~/.config/waybar/start.sh
exec-once = echo visible > ~/.config/hypr/state/.ui_visible
exec-once = setxkbmap fr

# Theming
exec-once = ~/.config/pywal/update_yazi_theme.sh

# Raccourcis & layout
exec-once = sleep 1 && ~/.config/hypr/scripts/load_hycov_binds.sh

#############################
### ENVIRONMENT VARIABLES ###
#############################

env = XCURSOR_SIZE,24
env = XCURSOR_THEME,Bibata-Modern-Ice
exec-once = gsettings set org.gnome.desktop.interface font-name 'Manrope 11'

###################
### PERMISSIONS ###
###################

# See https://wiki.hyprland.org/Configuring/Permissions/
# Please note permission changes here require a Hyprland restart and are not applied on-the-fly
# for security reasons

# ecosystem {
#   enforce_permissions = 1
# }

# permission = /usr/(bin|local/bin)/grim, screencopy, allow
# permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
# permission = /usr/(bin|local/bin)/hyprpm, plugin, allow

#####################
### LOOK & FEEL  ###
#####################

general {
    layout = dwindle

    # Espaces & bordures (gaps visibles même en single window)
    gaps_in  = 8
    gaps_out = 18
    border_size = 3

    # Bordures
    col.active_border   = rgba(ffffffff)   # blanc
    col.inactive_border = rgba(ffffff55)   # blanc doux

    resize_on_border = true
    allow_tearing    = false
}

decoration {
    rounding = 12
    active_opacity   = 0.92
    inactive_opacity = 0.84

    shadow {
        enabled = true
        range = 12
        render_power = 3
        color = rgba(0,0,0,0.28)
    }

    blur {
        enabled = yes
        size = 8
        passes = 3
        brightness = 1.05
        contrast = 0.98
        vibrancy = 0.015
        ignore_opacity = false
        new_optimizations = yes
        xray = false
        special = true
    }
}

animations {
    enabled = yes
    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = almostLinear,0.5,0.5,0.75,1

    animation = global,      1, 1.0, default
    animation = windows,     1, 4.6, easeOutQuint
    animation = windowsIn,   1, 4.0, easeOutQuint, popin 85%
    animation = windowsOut,  1, 1.4, almostLinear, popin 85%
    animation = border,      1, 5.0, easeOutQuint
    animation = fade,        1, 2.8, almostLinear
    animation = layers,      1, 3.5, easeOutQuint
}

dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    new_status = master
}

misc {
  force_default_wallpaper = 2
}


# --- LAYER RULES ---
layerrule = blur, eww
layerrule = noanim, waybar
layerrule = ignorealpha 0.0, waybar
layerrule = blur, hypr-dock
layerrule = ignorezero, hypr-dock
layerrule = blur, wlogout
layerrule = ignorezero, wlogout

# --- WINDOW RULES ---
windowrulev2 = bordersize 3, class:^(foot|kitty)$
windowrulev2 = opacity 0.95 0.90, class:^(foot)$
windowrulev2 = opacity 0.90 0.85, class:^(kitty)$

# --- Foot floating / Foot tiled (disambiguation propre)
windowrulev2 = float,  class:^footfloat$
windowrulev2 = center, class:^footfloat$
windowrulev2 = size 1100 700, class:^footfloat$

windowrulev2 = tile,   class:^foot-tiled$

windowrulev2 = float,  class:^(nemo|thunar|pavucontrol|nm-connection-editor)$
windowrulev2 = center, class:^(nemo|thunar|pavucontrol|nm-connection-editor)$
windowrulev2 = opacity 0.88 0.88, class:^(nemo)$

windowrulev2 = float,  title:^(Tofi)$
windowrulev2 = center, title:^(Tofi)$
windowrulev2 = noanim, title:^(Tofi)$

windowrulev2 = float,    class:^(eww)$
windowrulev2 = pin,      class:^(eww)$
windowrulev2 = nofocus,  class:^(eww)$
windowrulev2 = noborder, class:^(eww)$
windowrulev2 = noshadow, class:^(eww)$

windowrulev2 = opacity 0.85 0.85, title:^(cmatrix|btop|yazi)$

windowrulev2 = noblur, floating:1, class:^$, title:^$

workspace = 1, gapsin:8, gapsout:18
workspace = 2, gapsin:8, gapsout:18
workspace = 3, gapsin:8, gapsout:18
workspace = 4, gapsin:8, gapsout:18
workspace = 5, gapsin:8, gapsout:18

#####################
### INPUT & BINDS ###
#####################

input {
    kb_layout = fr
    kb_variant =
    kb_model   =
    kb_options = caps:ctrl_modifier
    follow_mouse = 1
    touchpad {
        natural_scroll = yes
    }
}

# --- KEYBINDS DE BASE ---
$mainMod = SUPER

###################
### KEYBINDINGS ###
###################

# See https://wiki.hyprland.org/Configuring/Keywords/
$mainMod = SUPER # Sets "Windows" key as main modifier

bind = SUPER, Return, exec, ~/.config/hypr/scripts/spawn_tiled_foot.sh
bind = SUPER, A, exec, ~/.config/hypr/scripts/spawn_floating_foot.sh
bind = SUPER, less, layoutmsg, togglesplit
bind = SUPER, F, togglefloating
bind = SUPER, W, exec, ~/.config/hypr/scripts/toggle_bar.sh
bind = SUPER, X, exec, hypr-dock

bind = SUPER, BackSpace, exec, ~/.config/hypr/scripts/close_all_windows.sh 
bind = SUPER, Tab, exec, gtk-launch nemo-tokyonight
bind = SUPER, twosuperior, exec, ~/.config/hypr/autostart_all.sh
bind = SUPER, ampersand, exec, ~/.config/rofi/launchers/type-7/launcher.sh
bind = SUPER, eacute, exec, ~/.config/hypr/scripts/show_workspaces.sh
bind = SUPER, quotedbl, exec, nwggrid -p
bind = SUPER, apostrophe, exec, ~/.config/hypr/scripts/cliphist.sh
bind = SUPER, parenleft, exec, ~/.config/hypr/scripts/system_dashboard.sh

# Suite logique des raccourcis F1-F12 pour les workspaces
bind = SUPER, F1, workspace, 1
bind = SUPER, F2, workspace, 2
bind = SUPER, F3, workspace, 3
bind = SUPER, F4, workspace, 4
bind = SUPER, F5, workspace, 5
bind = SUPER, F6, workspace, 6
bind = SUPER, F7, workspace, 7
bind = SUPER, F8, workspace, 8
bind = SUPER, F9, workspace, 9
bind = SUPER, F10, workspace, 10
bind = SUPER, F11, workspace, 11
bind = SUPER, F12, workspace, 12

# Déplacer les fenêtres vers les workspaces
bind = SUPER SHIFT, F1, movetoworkspace, 1
bind = SUPER SHIFT, F2, movetoworkspace, 2
bind = SUPER SHIFT, F3, movetoworkspace, 3
bind = SUPER SHIFT, F4, movetoworkspace, 4
bind = SUPER SHIFT, F5, movetoworkspace, 5
bind = SUPER SHIFT, F6, movetoworkspace, 6
bind = SUPER SHIFT, F7, movetoworkspace, 7
bind = SUPER SHIFT, F8, movetoworkspace, 8
bind = SUPER SHIFT, F9, movetoworkspace, 9
bind = SUPER SHIFT, F10, movetoworkspace, 10
bind = SUPER SHIFT, F11, movetoworkspace, 11
bind = SUPER SHIFT, F12, movetoworkspace, 12

bind = SUPER, Print, exec, ~/.config/hypr/scripts/screenshot_area.sh
bind = SUPER, SPACE, exec, ~/.config/hypr/scripts/toggle_ui.sh
bind = $mainMod, Q, killactive
bind = $mainMod, M, exec, wlogout
bind = $mainMod, V, fullscreen, 0
bind = $mainMod, R, exec, $menu
bind = $mainMod, J, togglesplit
bind = SUPER, L, exec, swaylock --effect-blur 7x5 --fade-in 0.3 --clock

# Navigation entre fenêtres
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r
bind = SUPER, up, movefocus, u
bind = SUPER, down, movefocus, d

# Déplacement clavier (flottant)
bind = SUPER CTRL, Left, moveactive, -50 0
bind = SUPER CTRL, Right, moveactive, 50 0
bind = SUPER CTRL, Up, moveactive, 0 -50
bind = SUPER CTRL, Down, moveactive, 0 50

# Réorganisation tiling
bind = SUPER SHIFT, Left, swapwindow, l
bind = SUPER SHIFT, Right, swapwindow, r
bind = SUPER SHIFT, Up, swapwindow, u
bind = SUPER SHIFT, Down, swapwindow, d

# Redimensionnement flottant clavier
bind = SUPER ALT, Left, resizeactive, -30 0
bind = SUPER ALT, Right, resizeactive, 30 0
bind = SUPER ALT, Up, resizeactive, 0 -30
bind = SUPER ALT, Down, resizeactive, 0 30

bind = SUPER CTRL, LEFT,  workspace, e-1
bind = SUPER CTRL, RIGHT, workspace, e+1
bind = SUPER CTRL, UP,    workspace, e-10
bind = SUPER CTRL, DOWN,  workspace, e+10

# Drag & resize souris (flottant)
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

# Laptop multimedia keys for volume and LCD brightness

bind = , F1, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind = , F2, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bind = , F3, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bind = , F4, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bind = , F5, exec, bash -lc '~/.local/bin/backlight-step 5%-'
bind = , F6, exec, bash -lc '~/.local/bin/backlight-step +5%'

bind = , F8, exec, nmgui

##############################
### WINDOWS AND WORKSPACES ###
##############################

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules

# Example windowrule
# windowrule = float,class:^(kitty)$,title:^(kitty)$

# Ignore maximize requests from apps. You'll probably like this.
windowrule = suppressevent maximize, class:.*
